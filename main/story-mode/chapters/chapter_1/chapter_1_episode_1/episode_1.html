<!DOCTYPE html>
<html lang="en"></html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 1 - Episode 1</title>
    <style>
    #fade-overlay {
        position: fixed;
        inset: 0;
        background: black;
        opacity: 1; /* ðŸ‘ˆ starts fully black */
        pointer-events: auto;
        transition: opacity 7s ease;
        z-index: 9999;
    }

    #fade-overlay.hidden {
        opacity: 0;
    }
    
    #fade-text {
    color: white;
    font-family: monospace;
    font-size: 24px;
    transform: translateX(-50%);
    white-space: pre-wrap;
    position: absolute;
    top: 50%;
    left: 50%;
    text-align: center;

    }
    
    #skip-button {
      display: block;           /* make it render so opacity works */
      opacity: 0;               /* start transparent */
      transition: opacity 1s ease; /* fade-in duration */
      position: absolute;
      bottom: 20px;
      right: 20px;
      padding: 10px 18px;
      font-size: 16px;
      background: #444;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      z-index: 10000;
  }

  #skip-button.show {
      opacity: 1;
  }


    #skip-button:hover {
      background: #666;
      opacity: 1;
    }

</style>

</head>

<body style="background-color: black;">
    <canvas id="rain"></canvas>
    
        <div class="overlay"></div>

        <div id="fade-overlay">
            <div id="fade-text"></div>
            <button id="skip-button">Skip</button>
        </div>

          
<script>
  const overlay = document.getElementById("fade-overlay");
  const fadeText = document.getElementById("fade-text");
  const skipButton = document.getElementById("skip-button");

  const texts = [
    "Chapter 1:",
    "Introduction",
    "Now the adventure begins."
  ];

  const typingSpeed = 60;       // ms per letter typing
  const deletingSpeed = 40;     // ms per letter deleting
  const pauseAfterTyping = 800; // pause after finishing a text
  const pauseBeforeNext = 500;  // pause before next text

  let textIndex = 0;
  let charIndex = 0;
  let typingTimeout;

  function typeWriterLoop() {
    const currentText = texts[textIndex];

    function type() {
      fadeText.textContent = currentText.slice(0, charIndex);
      if (charIndex < currentText.length) {
        charIndex++;
        typingTimeout = setTimeout(type, typingSpeed);
      } else {
        typingTimeout = setTimeout(deleteText, pauseAfterTyping);
      }
    }

    function deleteText() {
      fadeText.textContent = currentText.slice(0, charIndex);
      if (charIndex > 0) {
        charIndex--;
        typingTimeout = setTimeout(deleteText, deletingSpeed);
      } else {
        textIndex++;
        if (textIndex < texts.length) {
          charIndex = 0;
          typingTimeout = setTimeout(typeWriterLoop, pauseBeforeNext);
        } else {
          overlay.classList.add("hidden"); // fade overlay when done
        }
      }
    }

    type();
  }

  // skip function
  function skipIntro() {
    clearTimeout(typingTimeout);                 // stop current typing/deleting
    fadeText.textContent = texts[texts.length - 1]; // show final text immediately
    overlay.classList.add("hidden");             // fade overlay out
  }

  window.addEventListener("load", () => {
    // fade-in skip button
    skipButton.classList.add("show");

    // attach click
    skipButton.addEventListener("click", skipIntro);

    // start typewriter
    typeWriterLoop();
  });
</script>


        <script>
        (function(){
        const canvas = document.getElementById("rain");
        const ctx = canvas.getContext("2d");

        ctx.fillStyle = "black";

        let width, height, dpr;
        let drops = [];

        let DROP_COUNT = 500;
        let WIND = -0.4;
        let SPEED_MULT = 1;

        function resize() {
            dpr = window.devicePixelRatio || 1;
            width = innerWidth;
            height = innerHeight;

            canvas.width = width * dpr;
            canvas.height = height * dpr;
            canvas.style.width = width + "px";
            canvas.style.height = height + "px";
            ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        }

        class Drop {
            constructor(z = Math.random()) {
                this.z = z;
                this.reset();
            }

            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * -height;
                this.length = 10 + this.z * 25;
                this.speed = (4 + this.z * 10) * SPEED_MULT;
                this.opacity = 0.2 + this.z * 0.6;
            }

            update() {
                this.x += WIND * this.z;
                this.y += this.speed;
                if (this.y > height) {
                    this.reset();
                    this.y = 0;
                }
            }

            draw() {
                ctx.strokeStyle = `rgba(180,200,255,${this.opacity})`;
                ctx.lineWidth = 1 + this.z;
                ctx.beginPath();
                ctx.moveTo(this.x, this.y);
                ctx.lineTo(this.x + WIND * 8, this.y + this.length);
                ctx.stroke();
            }
        }

        function init() {
            drops = [];
            for (let i = 0; i < DROP_COUNT; i++) {
                drops.push(new Drop());
            }
        }

        function animate() {
            ctx.clearRect(0, 0, width, height);
            ctx.fillRect(0, 0, width, height);
            for (const d of drops) {
                d.update();
                d.draw();
            }
            requestAnimationFrame(animate);
        }

        // Optional controls from the original effect are only wired if present
        const toggle = document.getElementById("toggle");
        const controls = document.getElementById("controls");

        if (toggle && controls) {
            toggle.onclick = () => {
                toggle.classList.toggle("open");
                controls.classList.toggle("open");
            };

            const amount = document.getElementById("amount");
            const wind = document.getElementById("wind");
            const speed = document.getElementById("speed");

            if (amount) amount.oninput = e => { DROP_COUNT = +e.target.value; init(); };
            if (wind) wind.oninput = e => { WIND = +e.target.value; };
            if (speed) speed.oninput = e => { SPEED_MULT = +e.target.value; drops.forEach(d => d.reset()); };
        }

        window.onresize = () => { resize(); init(); };

        resize();
        init();
        animate();
        })();
        </script>
    <script src="episode_1.js"></script>
</body>